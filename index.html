4<!DOCTYPE html>
<html>
<head>
    <title>Ulva lactuca Büyüme Simülasyonu</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h2>Ulva lactuca Büyüme Modeli - Çanakkale Boğazı</h2>

Sıcaklık (°C): <input id="temp" type="number" value="22"><br>
Işık (µmol/m²/s): <input id="light" type="number" value="180"><br>
Başlangıç Biyokütle (g): <input id="bio" type="number" value="100"><br><br>

<button onclick="simulate()">Simülasyonu Çalıştır</button>

<canvas id="chart" width="600" height="300"></canvas>

<p id="warning"></p>

<script>
function simulate() {

    let mu_max = 0.28;
    let Topt = 20;
    let delta = 10;
    let Iopt = 200;
    let carbon_ratio = 0.33;

    let T = parseFloat(document.getElementById("temp").value);
    let I = parseFloat(document.getElementById("light").value);
    let biomass = parseFloat(document.getElementById("bio").value);

    let fT = 1 - Math.pow((T - Topt),2) / Math.pow(delta,2);
    if (fT < 0) fT = 0;

    let fI = I / (I + Iopt);

    let r = mu_max * fT * fI;

    let days = 30;
    let data = [];

    for (let d=0; d<days; d++) {
        biomass = biomass * (1 + r);
        data.push(biomass);
    }

    let ctx = document.getElementById('chart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: [...Array(days).keys()],
            datasets: [{
                label: 'Biyokütle (g)',
                data: data
            }]
        }
    });

    let co2 = biomass * carbon_ratio * 3.67;

    let warningText = "";

    if (T > 28) warningText += "⚠ Yüksek sıcaklık stresi riski.<br>";
    if (I > 400) warningText += "⚠ Aşırı ışık alg patlaması riski.<br>";

    warningText += "Tahmini CO₂ Yakalama: " + co2.toFixed(2) + " gram";

    document.getElementById("warning").innerHTML = warningText;
}
</script>

</body>
</html>
